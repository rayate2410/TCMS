{% extends 'base.html' %}

{% block content %}
<div id="page-wrapper">

            <div class="container-fluid">
				
                <!-- Page Heading -->
                
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            {{project.name}} 
                        </h1>
                        <ol class="breadcrumb">
						  <li><a href="/">Home</a></li>
						  <li><a href="/project">Projects</a></li>
						  <li class="active">Project Details</li>
						</ol>
                        
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    
                    
                <div>
            </div>
            <!-- /.container-fluid -->

        </div>
         
        <!-- /#page-wrapper -->

    </div>
    
   <div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Project Name</h3>
  </div>
  <div class="panel-body">
    {{project.name}}
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Description</h3>
  </div>
  <div class="panel-body">
    {{project.description}}
  </div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
    	<h3 class="panel-title">Categories</h3>
  	</div>
  	<div class="panel-body">
  		{% if categories.count > 0  %}
	    	<ul class="list-group">
	    		{% for category in categories %}
	    			<li class="list-group-item">{{ category.name }} -- {{category.description}} </li>
	    		{% endfor %}
	  		</ul>
		{% else %}
			<div class="panel-body">
    			No Categories found!!
  			</div>
  		{% endif %}
  	
  	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
    	<h3 class="panel-title">Builds</h3>
  	</div>
  	
	  	<div class="panel-body">
		  	<div class="row">
	  			<label class="col-lg-2 control-label" for="build">Select build</label>
	  				<div class="col-lg-3">
		  				{% if project.build_set.count > 0  %}
			    			<select id="build" name="result" class="form-control">
		   						{% for build in project.build_set.all %}
		   							<option value="{{build.id}}">{{build.version}}</option>
		      					{% endfor %}
		      				</select>
						{% else %}
							<div class="panel-body">
		    					No builds found!!
		  					</div>
		  				{% endif %}
		  		
		  			</div>
		  	</div>
		  	
		  	<div class="row">
	  			<label class="col-lg-2 control-label" for="description">Description</label>
				  	<div class="col-lg-4">
				  		<p id="description"></p>
				  	</div>
		  	</div>
	  	</div>
   
</div>   

<div class="panel panel-default">
	<div class="panel-heading">
    	<h3 class="panel-title">Environment used</h3>
  	</div>
  	<div class="panel-body">
  		{% if project.clientdevice_set.count > 0  %}
	    	<ul class="list-group">
	    		{% for client_device in project.clientdevice_set.all %}
	    			<li class="list-group-item">{{ client_device }} -- {{client_device.operating_system}} </li>
	    		{% endfor %}
	  		</ul>
		{% else %}
			<div class="panel-body">
    			No Environment details found!!
  			</div>
  		{% endif %}
  	
  	</div>
</div>

<script type="text/javascript">	

		$.ajax({
			type : "GET",
			url : "/project/getBuildDetails.psp",
			data : {
				"build" : $('#build').val()
			},
			success : returnSuccess,
			dataType : "json",
		});
	    $('#build').change(function() {
	    	
	    	$.ajax({
	    		type : "GET",
	    		url : "/project/getBuildDetails.psp",
	    		data : {
	    			"build" : $('#build').val()
	    		},
	    		success : returnSuccess,
	    		dataType : "json",
	    	});
	        
	        
	    });
	    
	    function returnSuccess(data, textStatus, jqXHR)
		{
	    	$('#description').html(data.description);
	    	
	    	
		}	

	
	
</script>
                    
{% endblock %}


